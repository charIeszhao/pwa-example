function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(e);if(t){var c=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{xg0J:function(e,t,n){"use strict";n.r(t),n.d(t,"Chapter18Module",(function(){return re}));var a,c=n("ofXK"),o=n("tyNb"),r=n("+0xr"),i=n("Dh3D"),l=n("JX91"),m=n("eIep"),s=n("lJxs"),u=n("JIr8"),b=n("VRyK"),d=n("LRne"),p=n("M9IT"),f=n("5+WD"),g=n("fXoL"),h=n("tk/3"),C=((a=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getRepoIssues",value:function(e,t,n){return this.http.get("https://api.github.com/search/issues?q=angular&sort=".concat(e,"&order=").concat(t,"&page=").concat(n+1))}}]),e}()).\u0275fac=function(e){return new(e||a)(g.Yb(h.a))},a.\u0275prov=g.Kb({token:a,factory:a.\u0275fac,providedIn:"any"}),a),x=n("/t3+"),_=n("kmnG"),P=n("qFsG"),O=n("bTqV"),v=n("STbY"),M=n("NFeN"),y=n("bSwM"),w=n("Xa2L");function k(e,t){if(1&e){var n=g.Vb();g.Ub(0,"button",25),g.Ub(1,"mat-icon"),g.Ac(2,"drag_handle"),g.Tb(),g.Ub(3,"mat-checkbox",26),g.cc("click",(function(e){return g.tc(n),e.stopPropagation()}))("change",(function(e){return g.tc(n),g.gc().hideColumns(e)})),g.Ac(4),g.Tb(),g.Tb()}if(2&e){var a=t.$implicit;g.Cb(3),g.mc("checked",a.hide)("name",a.id),g.Cb(1),g.Bc(a.id)}}function R(e,t){1&e&&(g.Ub(0,"mat-header-cell"),g.Ac(1,"\u64cd\u4f5c"),g.Tb())}function T(e,t){1&e&&(g.Ub(0,"mat-cell"),g.Ub(1,"mat-icon"),g.Ac(2,"edit"),g.Tb(),g.Tb())}function z(e,t){1&e&&g.Pb(0,"mat-cell",27)}function D(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"#"),g.Tb())}function S(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){var n=t.$implicit;g.Cb(1),g.Bc(n.number)}}function U(e,t){1&e&&(g.Ub(0,"mat-cell",27),g.Ac(1,"\u6c47\u603b"),g.Tb())}function A(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u6807\u9898"),g.Tb())}function L(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){var n=t.$implicit;g.Cb(1),g.Bc(n.title)}}function I(e,t){1&e&&g.Pb(0,"mat-cell",27)}function j(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u72b6\u6001"),g.Tb())}function F(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.hc(2,"i18nSelect"),g.Tb()),2&e){var n=t.$implicit,a=g.gc();g.Cb(1),g.Bc(g.jc(2,1,n.state,a.dicMap))}}function B(e,t){1&e&&g.Pb(0,"mat-cell",27)}function $(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u7559\u8a00\u6570"),g.Tb())}function H(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){var n=t.$implicit;g.Cb(1),g.Bc(n.comments)}}function J(e,t){if(1&e&&(g.Ub(0,"mat-cell",27),g.Ac(1),g.Tb()),2&e){var n=g.gc();g.Cb(1),g.Bc(n.getTotalComments())}}function q(e,t){1&e&&(g.Ub(0,"mat-header-cell",29),g.Ac(1,"\u521b\u5efa\u65f6\u95f4"),g.Tb())}function N(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.hc(2,"date"),g.Tb()),2&e){var n=t.$implicit;g.Cb(1),g.Bc(g.jc(2,1,n.created_at,"yyyy-MM-dd"))}}function V(e,t){1&e&&g.Pb(0,"mat-cell",27)}function G(e,t){1&e&&g.Pb(0,"mat-header-row")}function K(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-row",30),g.cc("click",(function(){g.tc(n);var e=t.$implicit;return g.gc().onRowClicked(e)})),g.Tb()}}function X(e,t){1&e&&g.Pb(0,"mat-footer-row")}function E(e,t){1&e&&g.Pb(0,"mat-spinner")}function Y(e,t){1&e&&(g.Ub(0,"div",34),g.Ac(1," GitHub API \u63a5\u53e3\u9650\u5236\u8bbf\u95ee\u6b21\u6570\uff0c\u8bf71\u5206\u949f\u540e\u518d\u8bbf\u95ee\uff01 "),g.Tb())}function Q(e,t){if(1&e&&(g.Ub(0,"div",31),g.zc(1,E,1,0,"mat-spinner",32),g.zc(2,Y,2,0,"div",33),g.Tb()),2&e){var n=g.gc();g.Cb(1),g.mc("ngIf",n.isLoadingResults),g.Cb(1),g.mc("ngIf",n.isRateLimitReached)}}var W,Z,ee,te,ne=function(){return[5,10,25,100]},ae=[{path:"",redirectTo:"data-table"},{path:"data-table",component:(W=function(){function e(t){_classCallCheck(this,e),this.issueService=t,this.title="Github \u4e2d Angular \u95ee\u9898\u5217\u8868",this.displayedColumns=["number","created","state","title","comments","menu"],this.dicMap={open:"\u6253\u5f00",closed:"\u5173\u95ed"},this.isLoadingResults=!0,this.isRateLimitReached=!1,this.menuColumns=[{id:"number",hide:!0},{id:"created",hide:!0},{id:"state",hide:!0},{id:"title",hide:!0},{id:"comments",hide:!0},{id:"menu",hide:!0}]}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.sort.sortChange.subscribe((function(){return e.paginator.pageIndex=0})),Object(b.a)(this.sort.sortChange,this.paginator.page).pipe(Object(l.a)({}),Object(m.a)((function(){return e.isLoadingResults=!0,e.issueService.getRepoIssues(e.sort.active,e.sort.direction,e.paginator.pageIndex)})),Object(s.a)((function(t){return e.isLoadingResults=!1,e.isRateLimitReached=!1,t.items})),Object(u.a)((function(){return e.isLoadingResults=!1,e.isRateLimitReached=!0,Object(d.a)([])}))).subscribe((function(t){e.dataSource=new r.n(t),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort}))}},{key:"onRowClicked",value:function(e){console.log("\u70b9\u51fb\u884c\u64cd\u4f5c: ",e)}},{key:"getTotalComments",value:function(){var e;return null===(e=this.dataSource)||void 0===e?void 0:e.data.map((function(e){return+e.comments})).reduce((function(e,t){return e+t}),0)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"drop",value:function(e){Object(f.d)(this.menuColumns,e.previousIndex,e.currentIndex)}},{key:"getMenuColumns",value:function(){return this.menuColumns.filter((function(e){return e.hide})).map((function(e){return e.id}))}},{key:"hideColumns",value:function(e){var t=e.source.name,n=e.checked;console.log(t,n);var a=this.menuColumns.map((function(e){return e.id})).indexOf(t);this.menuColumns[a].hide=n}}]),e}(),W.\u0275fac=function(e){return new(e||W)(g.Ob(C))},W.\u0275cmp=g.Ib({type:W,selectors:[["app-data-table"]],viewQuery:function(e,t){var n;1&e&&(g.xc(p.a,!0),g.xc(i.a,!0)),2&e&&(g.qc(n=g.dc())&&(t.paginator=n.first),g.qc(n=g.dc())&&(t.sort=n.first))},decls:45,vars:9,consts:[[1,"example-container"],["matInput","","placeholder","\u8f93\u5165\u8fc7\u6ee4\u5b57\u7b26",3,"keyup"],[1,"example-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","mat-menu-item","","cdkDrag","",4,"ngFor","ngForOf"],[1,"example-table-container"],["matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"mat-table","cdk-table",3,"dataSource"],["matColumnDef","menu"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","number"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","state"],["matColumnDef","comments"],["matColumnDef","created"],["mat-sort-header","","disableClear","",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[3,"click",4,"matRowDef","matRowDefColumns"],[4,"matFooterRowDef"],["pageSize","10","showFirstLastButtons","true",3,"pageSizeOptions"],["class","example-loading-shade",4,"ngIf"],["mat-menu-item","","cdkDrag","",1,"example-box"],["color","primary",3,"checked","name","click","change"],["mat-footer-cell",""],["mat-sort-header",""],["mat-sort-header","","disableClear",""],[3,"click"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"]],template:function(e,t){if(1&e&&(g.Ub(0,"div",0),g.Ub(1,"mat-toolbar-row"),g.Ub(2,"mat-form-field"),g.Ub(3,"mat-label"),g.Ac(4,"\u641c\u7d22"),g.Tb(),g.Ub(5,"input",1),g.cc("keyup",(function(e){return t.applyFilter(e)})),g.Tb(),g.Tb(),g.Pb(6,"span",2),g.Ub(7,"button",3),g.Ub(8,"mat-icon"),g.Ac(9,"more_vert"),g.Tb(),g.Tb(),g.Ub(10,"mat-menu",null,4),g.Ub(12,"div",5),g.cc("cdkDropListDropped",(function(e){return t.drop(e)})),g.zc(13,k,5,3,"button",6),g.Tb(),g.Tb(),g.Tb(),g.Ub(14,"div",7),g.Ub(15,"mat-table",8),g.Sb(16,9),g.zc(17,R,2,0,"mat-header-cell",10),g.zc(18,T,3,0,"mat-cell",11),g.zc(19,z,1,0,"mat-cell",12),g.Rb(),g.Sb(20,13),g.zc(21,D,2,0,"mat-header-cell",14),g.zc(22,S,2,1,"mat-cell",11),g.zc(23,U,2,0,"mat-cell",12),g.Rb(),g.Sb(24,15),g.zc(25,A,2,0,"mat-header-cell",14),g.zc(26,L,2,1,"mat-cell",11),g.zc(27,I,1,0,"mat-cell",12),g.Rb(),g.Sb(28,16),g.zc(29,j,2,0,"mat-header-cell",14),g.zc(30,F,3,4,"mat-cell",11),g.zc(31,B,1,0,"mat-cell",12),g.Rb(),g.Sb(32,17),g.zc(33,$,2,0,"mat-header-cell",14),g.zc(34,H,2,1,"mat-cell",11),g.zc(35,J,2,1,"mat-cell",12),g.Rb(),g.Sb(36,18),g.zc(37,q,2,0,"mat-header-cell",19),g.zc(38,N,3,4,"mat-cell",11),g.zc(39,V,1,0,"mat-cell",12),g.Rb(),g.zc(40,G,1,0,"mat-header-row",20),g.zc(41,K,1,0,"mat-row",21),g.zc(42,X,1,0,"mat-footer-row",22),g.Tb(),g.Tb(),g.Pb(43,"mat-paginator",23),g.Tb(),g.zc(44,Q,3,2,"div",24)),2&e){var n=g.rc(11);g.Cb(7),g.mc("matMenuTriggerFor",n),g.Cb(6),g.mc("ngForOf",t.menuColumns),g.Cb(2),g.mc("dataSource",t.dataSource),g.Cb(25),g.mc("matHeaderRowDef",t.getMenuColumns()),g.Cb(1),g.mc("matRowDefColumns",t.getMenuColumns()),g.Cb(1),g.mc("matFooterRowDef",t.getMenuColumns()),g.Cb(1),g.mc("pageSizeOptions",g.nc(8,ne)),g.Cb(1),g.mc("ngIf",t.isLoadingResults||t.isRateLimitReached)}},directives:[x.c,_.b,_.e,P.a,O.a,v.c,M.a,v.d,f.b,c.l,r.m,i.a,r.c,r.h,r.b,r.d,r.j,r.l,r.f,p.a,c.m,v.a,f.a,y.a,r.g,r.a,i.b,r.i,r.k,r.e,w.b],pipes:[c.g,c.e],styles:[".example-container[_ngcontent-%COMP%]{width:100%;padding:.625rem 1.5rem;height:calc(100vh - 6rem);box-shadow:0 0 4px 0 rgba(0,0,0,.3)}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]{height:calc(100vh - 15rem);overflow:auto}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-comments[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-number[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-state[_ngcontent-%COMP%]{max-width:8%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-created[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-menu[_ngcontent-%COMP%]{max-width:10%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-title[_ngcontent-%COMP%]{max-width:100%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer}.example-container[_ngcontent-%COMP%]   .example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{margin-top:.6rem}.example-container[_ngcontent-%COMP%]   .mat-toolbar-row[_ngcontent-%COMP%]{padding:0}.example-container[_ngcontent-%COMP%]   .mat-toolbar-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:30%}.example-container[_ngcontent-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;min-height:30px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-container[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.example-container[_ngcontent-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.example-container[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.example-container[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-container[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.example-container[_ngcontent-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-loading-shade[_ngcontent-%COMP%]   .example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}"]}),W)}],ce=((te=function e(){_classCallCheck(this,e)}).\u0275mod=g.Mb({type:te}),te.\u0275inj=g.Lb({factory:function(e){return new(e||te)},imports:[[o.c.forChild(ae)],o.c]}),te),oe=((ee=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).getRangeLabel=function(e,t,n){if(0===n||0===t)return"0 / ".concat(n);var a=e*t;return"".concat(a+1," - ").concat(a<(n=Math.max(n,0))?Math.min(a+t,n):a+t," / ").concat(n)},e.getAndInitTranslations(),e}return _createClass(n,[{key:"getAndInitTranslations",value:function(){this.itemsPerPageLabel="\u6bcf\u9875\u663e\u793a",this.nextPageLabel="\u4e0b\u4e00\u9875",this.previousPageLabel="\u4e0a\u4e00\u9875",this.changes.next()}}]),n}(p.b)).\u0275fac=function(e){return new(e||ee)},ee.\u0275prov=g.Kb({token:ee,factory:ee.\u0275fac}),ee),re=((Z=function e(){_classCallCheck(this,e)}).\u0275mod=g.Mb({type:Z}),Z.\u0275inj=g.Lb({factory:function(e){return new(e||Z)},providers:[{provide:p.b,useClass:oe}],imports:[[c.c,ce,h.b]]}),Z)}}]);