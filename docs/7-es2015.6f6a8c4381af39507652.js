(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{xg0J:function(e,t,n){"use strict";n.r(t),n.d(t,"Chapter18Module",(function(){return te}));var a=n("ofXK"),c=n("tyNb"),o=n("+0xr"),i=n("Dh3D"),r=n("JX91"),l=n("eIep"),m=n("lJxs"),s=n("JIr8"),b=n("VRyK"),d=n("LRne"),u=n("M9IT"),p=n("5+WD"),g=n("fXoL"),h=n("tk/3");let f=(()=>{class e{constructor(e){this.http=e}getRepoIssues(e,t,n){return this.http.get(`https://api.github.com/search/issues?q=angular&sort=${e}&order=${t}&page=${n+1}`)}}return e.\u0275fac=function(t){return new(t||e)(g.Yb(h.a))},e.\u0275prov=g.Kb({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();var C=n("/t3+"),x=n("kmnG"),M=n("qFsG"),P=n("bTqV"),O=n("STbY"),_=n("NFeN"),w=n("bSwM"),T=n("Xa2L");function R(e,t){if(1&e){const e=g.Vb();g.Ub(0,"button",25),g.Ub(1,"mat-icon"),g.Ac(2,"drag_handle"),g.Tb(),g.Ub(3,"mat-checkbox",26),g.cc("click",(function(t){return g.tc(e),t.stopPropagation()}))("change",(function(t){return g.tc(e),g.gc().hideColumns(t)})),g.Ac(4),g.Tb(),g.Tb()}if(2&e){const e=t.$implicit;g.Cb(3),g.mc("checked",e.hide)("name",e.id),g.Cb(1),g.Bc(e.id)}}function k(e,t){1&e&&(g.Ub(0,"mat-header-cell"),g.Ac(1,"\u64cd\u4f5c"),g.Tb())}function v(e,t){1&e&&(g.Ub(0,"mat-cell"),g.Ub(1,"mat-icon"),g.Ac(2,"edit"),g.Tb(),g.Tb())}function z(e,t){1&e&&g.Pb(0,"mat-cell",27)}function U(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"#"),g.Tb())}function D(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){const e=t.$implicit;g.Cb(1),g.Bc(e.number)}}function S(e,t){1&e&&(g.Ub(0,"mat-cell",27),g.Ac(1,"\u6c47\u603b"),g.Tb())}function y(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u6807\u9898"),g.Tb())}function A(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){const e=t.$implicit;g.Cb(1),g.Bc(e.title)}}function L(e,t){1&e&&g.Pb(0,"mat-cell",27)}function I(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u72b6\u6001"),g.Tb())}function $(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.hc(2,"i18nSelect"),g.Tb()),2&e){const e=t.$implicit,n=g.gc();g.Cb(1),g.Bc(g.jc(2,1,e.state,n.dicMap))}}function j(e,t){1&e&&g.Pb(0,"mat-cell",27)}function F(e,t){1&e&&(g.Ub(0,"mat-header-cell",28),g.Ac(1,"\u7559\u8a00\u6570"),g.Tb())}function B(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.Tb()),2&e){const e=t.$implicit;g.Cb(1),g.Bc(e.comments)}}function H(e,t){if(1&e&&(g.Ub(0,"mat-cell",27),g.Ac(1),g.Tb()),2&e){const e=g.gc();g.Cb(1),g.Bc(e.getTotalComments())}}function J(e,t){1&e&&(g.Ub(0,"mat-header-cell",29),g.Ac(1,"\u521b\u5efa\u65f6\u95f4"),g.Tb())}function q(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Ac(1),g.hc(2,"date"),g.Tb()),2&e){const e=t.$implicit;g.Cb(1),g.Bc(g.jc(2,1,e.created_at,"yyyy-MM-dd"))}}function V(e,t){1&e&&g.Pb(0,"mat-cell",27)}function G(e,t){1&e&&g.Pb(0,"mat-header-row")}function K(e,t){if(1&e){const e=g.Vb();g.Ub(0,"mat-row",30),g.cc("click",(function(){g.tc(e);const n=t.$implicit;return g.gc().onRowClicked(n)})),g.Tb()}}function X(e,t){1&e&&g.Pb(0,"mat-footer-row")}function N(e,t){1&e&&g.Pb(0,"mat-spinner")}function Y(e,t){1&e&&(g.Ub(0,"div",34),g.Ac(1," GitHub API \u63a5\u53e3\u9650\u5236\u8bbf\u95ee\u6b21\u6570\uff0c\u8bf71\u5206\u949f\u540e\u518d\u8bbf\u95ee\uff01 "),g.Tb())}function Q(e,t){if(1&e&&(g.Ub(0,"div",31),g.zc(1,N,1,0,"mat-spinner",32),g.zc(2,Y,2,0,"div",33),g.Tb()),2&e){const e=g.gc();g.Cb(1),g.mc("ngIf",e.isLoadingResults),g.Cb(1),g.mc("ngIf",e.isRateLimitReached)}}const W=function(){return[5,10,25,100]},E=[{path:"",redirectTo:"data-table"},{path:"data-table",component:(()=>{class e{constructor(e){this.issueService=e,this.title="Github \u4e2d Angular \u95ee\u9898\u5217\u8868",this.displayedColumns=["number","created","state","title","comments","menu"],this.dicMap={open:"\u6253\u5f00",closed:"\u5173\u95ed"},this.isLoadingResults=!0,this.isRateLimitReached=!1,this.menuColumns=[{id:"number",hide:!0},{id:"created",hide:!0},{id:"state",hide:!0},{id:"title",hide:!0},{id:"comments",hide:!0},{id:"menu",hide:!0}]}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(b.a)(this.sort.sortChange,this.paginator.page).pipe(Object(r.a)({}),Object(l.a)(()=>(this.isLoadingResults=!0,this.issueService.getRepoIssues(this.sort.active,this.sort.direction,this.paginator.pageIndex))),Object(m.a)(e=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,e.items)),Object(s.a)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,Object(d.a)([])))).subscribe(e=>{this.dataSource=new o.n(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}onRowClicked(e){console.log("\u70b9\u51fb\u884c\u64cd\u4f5c: ",e)}getTotalComments(){var e;return null===(e=this.dataSource)||void 0===e?void 0:e.data.map(e=>+e.comments).reduce((e,t)=>e+t,0)}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}drop(e){Object(p.d)(this.menuColumns,e.previousIndex,e.currentIndex)}getMenuColumns(){return this.menuColumns.filter(e=>e.hide).map(e=>e.id)}hideColumns(e){const t=e.source.name,n=e.checked;console.log(t,n);const a=this.menuColumns.map(e=>e.id).indexOf(t);this.menuColumns[a].hide=n}}return e.\u0275fac=function(t){return new(t||e)(g.Ob(f))},e.\u0275cmp=g.Ib({type:e,selectors:[["app-data-table"]],viewQuery:function(e,t){var n;1&e&&(g.xc(u.a,!0),g.xc(i.a,!0)),2&e&&(g.qc(n=g.dc())&&(t.paginator=n.first),g.qc(n=g.dc())&&(t.sort=n.first))},decls:45,vars:9,consts:[[1,"example-container"],["matInput","","placeholder","\u8f93\u5165\u8fc7\u6ee4\u5b57\u7b26",3,"keyup"],[1,"example-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","mat-menu-item","","cdkDrag","",4,"ngFor","ngForOf"],[1,"example-table-container"],["matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"mat-table","cdk-table",3,"dataSource"],["matColumnDef","menu"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","number"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","state"],["matColumnDef","comments"],["matColumnDef","created"],["mat-sort-header","","disableClear","",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[3,"click",4,"matRowDef","matRowDefColumns"],[4,"matFooterRowDef"],["pageSize","10","showFirstLastButtons","true",3,"pageSizeOptions"],["class","example-loading-shade",4,"ngIf"],["mat-menu-item","","cdkDrag","",1,"example-box"],["color","primary",3,"checked","name","click","change"],["mat-footer-cell",""],["mat-sort-header",""],["mat-sort-header","","disableClear",""],[3,"click"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"]],template:function(e,t){if(1&e&&(g.Ub(0,"div",0),g.Ub(1,"mat-toolbar-row"),g.Ub(2,"mat-form-field"),g.Ub(3,"mat-label"),g.Ac(4,"\u641c\u7d22"),g.Tb(),g.Ub(5,"input",1),g.cc("keyup",(function(e){return t.applyFilter(e)})),g.Tb(),g.Tb(),g.Pb(6,"span",2),g.Ub(7,"button",3),g.Ub(8,"mat-icon"),g.Ac(9,"more_vert"),g.Tb(),g.Tb(),g.Ub(10,"mat-menu",null,4),g.Ub(12,"div",5),g.cc("cdkDropListDropped",(function(e){return t.drop(e)})),g.zc(13,R,5,3,"button",6),g.Tb(),g.Tb(),g.Tb(),g.Ub(14,"div",7),g.Ub(15,"mat-table",8),g.Sb(16,9),g.zc(17,k,2,0,"mat-header-cell",10),g.zc(18,v,3,0,"mat-cell",11),g.zc(19,z,1,0,"mat-cell",12),g.Rb(),g.Sb(20,13),g.zc(21,U,2,0,"mat-header-cell",14),g.zc(22,D,2,1,"mat-cell",11),g.zc(23,S,2,0,"mat-cell",12),g.Rb(),g.Sb(24,15),g.zc(25,y,2,0,"mat-header-cell",14),g.zc(26,A,2,1,"mat-cell",11),g.zc(27,L,1,0,"mat-cell",12),g.Rb(),g.Sb(28,16),g.zc(29,I,2,0,"mat-header-cell",14),g.zc(30,$,3,4,"mat-cell",11),g.zc(31,j,1,0,"mat-cell",12),g.Rb(),g.Sb(32,17),g.zc(33,F,2,0,"mat-header-cell",14),g.zc(34,B,2,1,"mat-cell",11),g.zc(35,H,2,1,"mat-cell",12),g.Rb(),g.Sb(36,18),g.zc(37,J,2,0,"mat-header-cell",19),g.zc(38,q,3,4,"mat-cell",11),g.zc(39,V,1,0,"mat-cell",12),g.Rb(),g.zc(40,G,1,0,"mat-header-row",20),g.zc(41,K,1,0,"mat-row",21),g.zc(42,X,1,0,"mat-footer-row",22),g.Tb(),g.Tb(),g.Pb(43,"mat-paginator",23),g.Tb(),g.zc(44,Q,3,2,"div",24)),2&e){const e=g.rc(11);g.Cb(7),g.mc("matMenuTriggerFor",e),g.Cb(6),g.mc("ngForOf",t.menuColumns),g.Cb(2),g.mc("dataSource",t.dataSource),g.Cb(25),g.mc("matHeaderRowDef",t.getMenuColumns()),g.Cb(1),g.mc("matRowDefColumns",t.getMenuColumns()),g.Cb(1),g.mc("matFooterRowDef",t.getMenuColumns()),g.Cb(1),g.mc("pageSizeOptions",g.nc(8,W)),g.Cb(1),g.mc("ngIf",t.isLoadingResults||t.isRateLimitReached)}},directives:[C.c,x.b,x.e,M.a,P.a,O.c,_.a,O.d,p.b,a.l,o.m,i.a,o.c,o.h,o.b,o.d,o.j,o.l,o.f,u.a,a.m,O.a,p.a,w.a,o.g,o.a,i.b,o.i,o.k,o.e,T.b],pipes:[a.g,a.e],styles:[".example-container[_ngcontent-%COMP%]{width:100%;padding:.625rem 1.5rem;height:calc(100vh - 6rem);box-shadow:0 0 4px 0 rgba(0,0,0,.3)}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]{height:calc(100vh - 15rem);overflow:auto}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-comments[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-number[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-state[_ngcontent-%COMP%]{max-width:8%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-created[_ngcontent-%COMP%], .example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-menu[_ngcontent-%COMP%]{max-width:10%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-column-title[_ngcontent-%COMP%]{max-width:100%}.example-container[_ngcontent-%COMP%]   .example-table-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer}.example-container[_ngcontent-%COMP%]   .example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{margin-top:.6rem}.example-container[_ngcontent-%COMP%]   .mat-toolbar-row[_ngcontent-%COMP%]{padding:0}.example-container[_ngcontent-%COMP%]   .mat-toolbar-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:30%}.example-container[_ngcontent-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;min-height:30px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-container[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.example-container[_ngcontent-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.example-container[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.example-container[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-container[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.example-container[_ngcontent-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-loading-shade[_ngcontent-%COMP%]   .example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275mod=g.Mb({type:e}),e.\u0275inj=g.Lb({factory:function(t){return new(t||e)},imports:[[c.c.forChild(E)],c.c]}),e})(),ee=(()=>{class e extends u.b{constructor(){super(),this.getRangeLabel=(e,t,n)=>{if(0===n||0===t)return`0 / ${n}`;const a=e*t;return`${a+1} - ${a<(n=Math.max(n,0))?Math.min(a+t,n):a+t} / ${n}`},this.getAndInitTranslations()}getAndInitTranslations(){this.itemsPerPageLabel="\u6bcf\u9875\u663e\u793a",this.nextPageLabel="\u4e0b\u4e00\u9875",this.previousPageLabel="\u4e0a\u4e00\u9875",this.changes.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Kb({token:e,factory:e.\u0275fac}),e})(),te=(()=>{class e{}return e.\u0275mod=g.Mb({type:e}),e.\u0275inj=g.Lb({factory:function(t){return new(t||e)},providers:[{provide:u.b,useClass:ee}],imports:[[a.c,Z,h.b]]}),e})()}}]);